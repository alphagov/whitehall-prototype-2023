{# Define some defaults #}
{% set showNav = params.showNav if params.showNav else "false" %}
{% set showSearch = params.showSearch if params.showSearch else "false" %}


{%- if showNav == "false" and showSearch == "false"%}

  {%- if params.transactionalService%}
    <div class="nhsuk-header__transactional-service-name{% if params.transactionalService.longName %} nhsuk-header__transactional-service-name--long{% endif %}">
      <a class="nhsuk-header__transactional-service-name--link" href="{% if params.transactionalService.href %}{{ params.transactionalService.href }}{% else %}/{% endif %}">{{ params.transactionalService.name }}</a>
    </div>
  {%- endif %}

</div>{# close nhsuk-header__container #}

{% endif -%}

{% if showNav == "true" and params.primaryLinks and showSearch == "true" %}

</div>{# close nhsuk-header__container #}

<nav class="nhsuk-header__navigation" id="header-navigation" role="navigation" aria-label="Primary navigation" aria-labelledby="label-navigation">
  <p class="nhsuk-header__navigation-title"><span id="label-navigation">Menu</span>
    <button class="nhsuk-header__navigation-close" id="close-menu">
      <svg class="nhsuk-icon nhsuk-icon__close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"></path>
      </svg>
      <span class="nhsuk-u-visually-hidden">Close menu</span>
    </button>
  </p>
  <ul class="nhsuk-header__navigation-list">
    <li class="nhsuk-header__navigation-item nhsuk-header__navigation-item--for-mobile">
      <a class="nhsuk-header__navigation-link" href="{% if params.homeHref %}{{ params.homeHref }}{% else %}/{% endif %}">
        Home
        <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"></path>
        </svg>
      </a>
    </li>
    {%- for item in params.primaryLinks %}
    <li class="nhsuk-header__navigation-item">
      <a class="nhsuk-header__navigation-link" href="{{item.url}}">
        {{item.label}}
        <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"></path>
        </svg>
      </a>
    </li>
    {%- endfor %}
  </ul>
</nav>

{% endif -%}

{% if showSearch == "true" and showNav == "false" %}

</div>{# close nhsuk-header__container #}

{% endif -%}

{% if showNav == "true" and params.primaryLinks and showSearch == "false" %}
</div>{# close nhsuk-header__container #}

<nav class="nhsuk-header__navigation" id="header-navigation" role="navigation" aria-label="Primary navigation" aria-labelledby="label-navigation">
  <p class="nhsuk-header__navigation-title"><span id="label-navigation">Menu</span>
    <button class="nhsuk-header__navigation-close" id="close-menu">
      <svg class="nhsuk-icon nhsuk-icon__close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M13.41 12l5.3-5.29a1 1 0 1 0-1.42-1.42L12 10.59l-5.29-5.3a1 1 0 0 0-1.42 1.42l5.3 5.29-5.3 5.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l5.29-5.3 5.29 5.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"></path>
      </svg>
      <span class="nhsuk-u-visually-hidden">Close menu</span>
    </button>
  </p>
  <ul class="nhsuk-header__navigation-list">
    <li class="nhsuk-header__navigation-item nhsuk-header__navigation-item--for-mobile">
      <a class="nhsuk-header__navigation-link" href="{% if params.homeHref %}{{ params.homeHref }}{% else %}/{% endif %}">
        Home
        <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"></path>
        </svg>
      </a>
    </li>
    {%- for item in params.primaryLinks %}
    <li class="nhsuk-header__navigation-item">
      <a class="nhsuk-header__navigation-link" href="{{item.url}}">
        {{item.label}}
        <svg class="nhsuk-icon nhsuk-icon__chevron-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"></path>
        </svg>
      </a>
    </li>
    {%- endfor %}
  </ul>
</nav>

{% endif -%}
